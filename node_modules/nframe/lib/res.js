
var res;
var req;
var body ='';
var $;
var cookies = [];

exports.set = function(request, response) {
	body = '';
	res = response;
	req = request;
}

exports.write = function(data){
	switch(typeof data) {
		case 'string' :
			body += data;
			break;
		case 'object' :
			for(prop in data) {
				body += '<br>' + prop + ': ' + data[prop];
			}
			break;
	}
};

exports.end = function(data) {
	exports.write(data);
	res.setHeader('Set-Cookie', cookies);
	res.writeHead(200, {
  		'Content-Type': 'text/html'
  	});
  	res.write(body);
	res.end();
};

exports.setModules = function(moduleObject) {
	$ = moduleObject;
};

exports.setCookie = function(cookie) {
	cookies.push(cookie);
}